<?php
$host = 'localhost';
$db   = 'library';
$user = 'root';
$pass = '';
$charset = 'utf8mb4';

$dsn = "mysql:host=$host;dbname=$db;charset=$charset";
$pdo = new PDO($dsn, $user, $pass, [
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
]);

// –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∫–Ω–∏–≥–∏
$stmt = $pdo->query("SELECT b.title, a.first_name, a.last_name, b.available_copies 
                     FROM books b 
                     LEFT JOIN authors a ON b.author_id = a.author_id");
$books = $stmt->fetchAll();
?>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ‚Äî –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥</h1>
    <table>
        <thead>
            <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ê–≤—Ç–æ—Ä</th>
                <th>–î–æ—Å—Ç—É–ø–Ω–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($books as $book): ?>
            <tr>
                <td><?= htmlspecialchars($book['title']) ?></td>
                <td><?= htmlspecialchars($book['first_name'] . ' ' . $book['last_name']) ?></td>
                <td><?= $book['available_copies'] ?></td>
            </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</body>
</html>
